<HomeScreen>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        # Fixed Header at top (10% height, 100% width)
        BoxLayout:
            size_hint: 1, 0.1
            pos_hint: {'top': 1, 'center_x': 0.5}
            padding: [dp(8) if root.width < dp(360) else dp(12), dp(6) if root.width < dp(360) else dp(8)]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                # Web-like gold shadow/underline
                Color:
                    rgba: 1, 0.84, 0, 0.25
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(2)
                Color:
                    rgba: 1, 0.84, 0, 0.12
                Rectangle:
                    pos: self.x, self.y - dp(6)
                    size: self.width, dp(6)

            # Brand (clickable like navbar brand)
            Button:
                id: brand_logo
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                size_hint_x: None
                width: min(dp(140), root.width * 0.42)
                font_size: sp(20) if root.width < dp(360) else (sp(24) if root.width < dp(600) else sp(28))
                background_normal: ''
                background_color: 0, 0, 0, 0
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
                on_release: app.root.current = 'home'

            Widget:

            # Notifications (only when logged in)
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(40) if root.width < dp(360) else dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(18) if root.width < dp(360) else (sp(20) if root.width < dp(600) else sp(22))
                opacity: 1 if app.is_authenticated else 0
                disabled: not app.is_authenticated
                on_release: app.go_notifications()

            # Auth-aware navbar links (show on wider screens)
            Button:
                text: 'Profile'
                size_hint_x: None
                width: dp(72)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if (app.is_authenticated and root.width >= dp(900)) else 0
                disabled: not (app.is_authenticated and root.width >= dp(900))
                on_release: app.go_profile()
            Button:
                text: 'Logout'
                size_hint_x: None
                width: dp(72)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if (app.is_authenticated and root.width >= dp(900)) else 0
                disabled: not (app.is_authenticated and root.width >= dp(900))
                on_release: app.do_logout()

            Button:
                text: 'Login'
                size_hint_x: None
                width: dp(62)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if ((not app.is_authenticated) and root.width >= dp(900)) else 0
                disabled: not ((not app.is_authenticated) and root.width >= dp(900))
                on_release: app.root.current = 'login'
            Button:
                text: 'Register'
                size_hint_x: None
                width: dp(78)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if ((not app.is_authenticated) and root.width >= dp(900)) else 0
                disabled: not ((not app.is_authenticated) and root.width >= dp(900))
                on_release: app.root.current = 'register'

            Button:
                text: 'About us'
                size_hint_x: None
                width: dp(80)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if root.width >= dp(980) else 0
                disabled: not (root.width >= dp(980))
                on_release: app.open_about()
            Button:
                text: 'Contact us'
                size_hint_x: None
                width: dp(92)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if root.width >= dp(980) else 0
                disabled: not (root.width >= dp(980))
                on_release: app.open_contact()

            # Mobile-style collapse/menu button
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20) if root.width < dp(600) else sp(22)
                on_release: app.show_options_menu()
        
        # Scrollable Services Grid (below header)
        ScrollView:
            size_hint: 1, 0.9
            pos_hint: {'top': 0.9, 'center_x': 0.5}
            do_scroll_x: False
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'top'
                GridLayout:
                    id: services_grid
                    cols: 2 if root.width < dp(768) else 3
                    # Bootstrap-ish gutters: g-4 (~24) on small, g-lg-3 (~16) on large
                    spacing: dp(16) if root.width >= dp(992) else dp(24)
                    padding: [dp(16), dp(16)]
                    size_hint: None, None
                    width: self.minimum_width
                    height: self.minimum_height
                    # On large screens, use fixed card widths like max-width: 260px
                    col_force_default: True if root.width >= dp(992) else False
                    col_default_width: dp(260) if root.width >= dp(992) else (self.parent.width - (self.padding[0] + self.padding[2]) - (self.spacing[0] * (self.cols-1))) / float(self.cols)

<UniversitiesScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        
        # Fixed App Header (web-like navbar)
        BoxLayout:
            size_hint_y: None
            height: dp(62)
            padding: [dp(16), 0]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 1, 0.84, 0, 0.25
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(2)
                Color:
                    rgba: 1, 0.84, 0, 0.12
                Rectangle:
                    pos: self.x, self.y - dp(6)
                    size: self.width, dp(6)

            # Brand (matches web navbar brand)
            Button:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                size_hint_x: None
                width: min(dp(140), root.width * 0.42)
                font_size: sp(22) if root.width < dp(600) else sp(26)
                background_normal: ''
                background_color: 0, 0, 0, 0
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
                on_release: app.root.current = 'home'
            Widget:
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                opacity: 1 if app.is_authenticated else 0
                disabled: not app.is_authenticated
                on_release: app.go_notifications()
            Button:
                text: 'Profile'
                size_hint_x: None
                width: dp(72) if root.width < dp(360) else dp(84)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(13) if root.width < dp(360) else sp(14)
                color: 0, 0, 0, 1
                # Match web mobile navbar: profile is in the hamburger menu
                opacity: 1 if (app.is_authenticated and root.width >= dp(900)) else 0
                disabled: not (app.is_authenticated and root.width >= dp(900))
                on_release: app.go_profile()

            # Options (navbar toggler)
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                color: 0, 0, 0, 1
                on_release: app.show_options_menu()
        
        # Subtitle (web universities.html) + loading indicator
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: dp(52)
            padding: [dp(16), dp(10)]
            spacing: dp(2)
            Label:
                id: subtitle_label
                text: 'Select a university to view available accommodations.'
                font_size: sp(14) if root.width < dp(600) else sp(15)
                halign: 'center'
                valign: 'middle'
                text_size: self.size
                color: 0.45, 0.45, 0.45, 1
            Label:
                id: loading_label
                text: ''
                font_size: sp(12)
                halign: 'center'
                valign: 'middle'
                text_size: self.size
                color: 0.45, 0.45, 0.45, 1
        
        # Universities grid - responsive columns
        ScrollView:
            GridLayout:
                id: unis_container
                # Match web breakpoints:
                # <576: 1 col, 577-768: 2 cols, 769-992: 3 cols, >=993: 4 cols
                cols: 1 if root.width <= dp(576) else (2 if root.width <= dp(768) else (3 if root.width <= dp(992) else 4))
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(20)
                padding: [dp(20), dp(20)]

<PropertyListScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        canvas.before:
            Color:
                rgba: 0.98, 0.98, 0.98, 1
            Rectangle:
                pos: self.pos
                size: self.size
        
        # Fixed App Header (10% height)
        BoxLayout:
            size_hint_y: 0.1
            padding: [dp(12), dp(8)]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 1, 0.84, 0, 0.25
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(2)
                Color:
                    rgba: 1, 0.84, 0, 0.12
                Rectangle:
                    pos: self.x, self.y - dp(6)
                    size: self.width, dp(6)
            Button:
                text: '‚Üê'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(24)
                on_release: app.root.current = 'home'

            # Brand (responsive like HomeScreen)
            Button:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                size_hint_x: None
                width: min(dp(140), root.width * 0.42)
                font_size: sp(22) if root.width < dp(600) else sp(26)
                background_normal: ''
                background_color: 0, 0, 0, 0
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
                on_release: app.root.current = 'home'
            Widget:
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                opacity: 1 if app.is_authenticated else 0
                disabled: not app.is_authenticated
                on_release: app.go_notifications()
            Button:
                text: 'Profile'
                size_hint_x: None
                width: dp(84)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                # Hide on small screens to keep header responsive
                opacity: 1 if (app.is_authenticated and root.width >= dp(900)) else 0
                disabled: not (app.is_authenticated and root.width >= dp(900))
                on_release: app.go_profile()

            # Options (navbar toggler)
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                color: 0, 0, 0, 1
                on_release: app.show_options_menu()
        
        # Fixed Search Bar (better styling, always visible)
        BoxLayout:
            size_hint_y: None
            height: dp(70)
            orientation: 'vertical'
            padding: [dp(16), dp(8)]
            spacing: 0
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0.93, 0.93, 0.93, 1
                Rectangle:
                    pos: [self.x, self.y]
                    size: [self.width, dp(1)]
            BoxLayout:
                size_hint_y: None
                height: dp(48)
                spacing: 10
                TextInput:
                    id: search_input
                    hint_text: 'üîç Search amenities or price...'
                    multiline: False
                    font_size: sp(15)
                    padding: [dp(18), dp(12)]
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    foreground_color: 0.15, 0.15, 0.15, 1
                    hint_text_color: 0.6, 0.6, 0.6, 1
                    cursor_color: 0.05, 0.43, 0.99, 1
                    canvas.before:
                        Color:
                            rgba: 0.96, 0.96, 0.96, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(25),]
                        Color:
                            rgba: 0.88, 0.88, 0.88, 1
                        Line:
                            rounded_rectangle: [self.x, self.y, self.width, self.height, dp(25)]
                            width: 1.5
                Button:
                    text: 'Search'
                    size_hint_x: None
                    width: dp(90)
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: 1, 1, 1, 1
                    font_size: sp(15)
                    bold: True
                    canvas.before:
                        Color:
                            rgba: 0.05, 0.43, 0.99, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(25),]
            Label:
                id: props_loading
                text: ''
                size_hint_y: None
                height: 0
                halign: 'center'
                valign: 'middle'
                color: 0.5, 0.5, 0.5, 1
        
        # Properties list with responsive columns (1 on mobile, up to 3 on large screens)
        ScrollView:
            GridLayout:
                id: props_container
                # Responsive listing: small -> 1 col, medium -> 2 cols, large -> 3 cols
                cols: 1 if root.width < dp(600) else (2 if root.width < dp(900) else 3)
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(18) if root.width < dp(768) else dp(24)
                padding: [dp(8) if root.width < dp(768) else dp(16), dp(10), dp(8) if root.width < dp(768) else dp(16), dp(120)]
        
        # Fixed Bottom Filter Panel (evenly distributed, better design)
        BoxLayout:
            size_hint_y: None
            height: self.parent.height * 0.1 if self.parent else dp(70)
            padding: [dp(12), dp(8)]
            spacing: dp(10)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0, 0, 0, 0.08
                Rectangle:
                    pos: [self.x, self.top - dp(4)]
                    size: [self.width, dp(4)]
            
            # Evenly distributed filter buttons
            Button:
                id: filter_all
                text: 'All'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 1, 1, 1, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 1, 0.84, 0, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
            Button:
                id: filter_two_sharing
                text: '2 Share'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5
            Button:
                id: filter_single
                text: 'Single'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5
            Button:
                id: filter_boys
                text: 'Boys'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5
            Button:
                id: filter_girls
                text: 'Girls'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5
            Button:
                id: filter_mixed
                text: 'Mixed'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5
            Button:
                id: filter_overnight
                text: '‚≠ê Night'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: sp(13)
                bold: True
                canvas.before:
                    Color:
                        rgba: 0.94, 0.94, 0.94, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(50),]
                    Color:
                        rgba: 0.88, 0.88, 0.88, 1
                    Line:
                        rounded_rectangle: [self.x, self.y, self.width, self.height, dp(50)]
                        width: 1.5

<PropertyDetailScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        canvas.before:
            Color:
                rgba: 0.98, 0.98, 0.98, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Fixed header (web uses fixed header with brand only)
        BoxLayout:
            size_hint_y: None
            height: dp(58)
            padding: [dp(16), 0]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 0.984, 0.969, 0.969, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0, 0, 0, 0.12
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(1)
            Button:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                size_hint_x: None
                width: min(dp(140), root.width * 0.42)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.06, 0.055, 0.055, 1
                font_size: sp(20) if root.width < dp(360) else sp(24)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                on_release: app.root.current = 'home'
            Widget:
            Label:
                id: prop_loading
                text: ''
                size_hint_x: None
                width: dp(90)
                halign: 'right'
                valign: 'middle'
                text_size: self.size
                color: 0.5, 0.5, 0.5, 1
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                on_release: app.go_notifications()
            Button:
                text: 'Profile'
                size_hint_x: None
                width: (dp(84) if root.width >= dp(900) else (dp(72) if root.width < dp(360) else dp(84)))
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(13) if root.width < dp(360) else sp(14)
                color: 0, 0, 0, 1
                opacity: 1 if root.width >= dp(900) else 0
                disabled: True if root.width < dp(900) else False
                on_release: app.go_profile()

            # Options (navbar toggler)
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                color: 0, 0, 0, 1
                on_release: app.show_options_menu()

        # Content (web uses a compact card-based layout)
        ScrollView:
            do_scroll_x: False
            bar_width: dp(6)
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(12)
                padding: [dp(12), dp(12), dp(12), (dp(84) if root.width < dp(900) else dp(12))]

                # Web layout: left details + right location/contact on large screens
                BoxLayout:
                    id: detail_cols
                    orientation: 'horizontal' if root.width >= dp(900) else 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(12)

                    # Left column
                    BoxLayout:
                        id: detail_left
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(12)
                        size_hint_x: (0.62 if root.width >= dp(900) else 1)

                        # Property gallery (web: media block)
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(210)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))
                            ScrollView:
                                do_scroll_y: False
                                do_scroll_x: True
                                bar_width: dp(4)
                                size_hint_y: None
                                height: dp(210)
                                GridLayout:
                                    id: gallery_container
                                    rows: 1
                                    size_hint_x: None
                                    width: self.minimum_width
                                    spacing: dp(10)
                                    padding: [dp(12), dp(10)]

                        # Property header card
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: [dp(16), dp(14)]
                            spacing: dp(10)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        Label:
                            id: prop_title
                            text: ''
                            font_size: sp(22)
                            bold: True
                            size_hint_y: None
                            height: self.texture_size[1] + dp(6)
                            halign: 'left'
                            valign: 'top'
                            text_size: self.width, None
                            color: 0.13, 0.13, 0.13, 1
                        Button:
                            text: '‚òé'
                            size_hint: None, None
                            size: dp(40), dp(40)
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                            color: 0.05, 0.43, 0.99, 1
                            font_size: sp(18)
                            on_release: root.contact_landlord()
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(20),]
                                Color:
                                    rgba: 0, 0, 0, 0.10
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(20))

                    Label:
                        id: prop_subtitle
                        text: ''
                        font_size: sp(13)
                        size_hint_y: None
                        height: self.texture_size[1] + dp(4)
                        halign: 'left'
                        valign: 'top'
                        text_size: self.width, None
                        color: 0.45, 0.45, 0.45, 1

                    Label:
                        id: prop_price_line
                        text: ''
                        markup: True
                        font_size: sp(20)
                        bold: True
                        size_hint_y: None
                        height: self.texture_size[1] + dp(6)
                        halign: 'left'
                        valign: 'middle'
                        text_size: self.width, None
                        color: 0.13, 0.13, 0.13, 1

                    # Web layout: meta summary sits in the Amenities card (below)
                    BoxLayout:
                        id: price_badges
                        size_hint_y: None
                        height: 0
                        opacity: 0

                        # Amenities section (matches web: meta summary + badges)
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: [dp(16), dp(14)]
                            spacing: dp(10)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))
                            Label:
                                text: 'Amenities'
                                size_hint_y: None
                                height: dp(22)
                                font_size: sp(16)
                                bold: True
                                color: 0.13, 0.13, 0.13, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                            BoxLayout:
                                id: prop_meta_items
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: dp(6)
                            BoxLayout:
                                id: amenities_container
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: dp(10)

                        # Description section (web: card below amenities)
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: [dp(16), dp(14)]
                            spacing: dp(10)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))
                            Label:
                                text: 'Description'
                                size_hint_y: None
                                height: dp(22)
                                font_size: sp(16)
                                bold: True
                                color: 0.13, 0.13, 0.13, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                            Label:
                                id: prop_desc
                                text: ''
                                font_size: sp(14)
                                size_hint_y: None
                                height: self.texture_size[1] + dp(6)
                                halign: 'left'
                                valign: 'top'
                                text_size: self.width, None
                                color: 0.25, 0.25, 0.25, 1

                        # Location card (mobile/tablet: stays in-flow like web stacking)
                        BoxLayout:
                            id: location_card_mobile
                            orientation: 'vertical'
                            size_hint_y: None
                            height: (self.minimum_height if root.width < dp(900) else 0)
                            opacity: 1 if root.width < dp(900) else 0
                            disabled: False if root.width < dp(900) else True
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))

                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(44)
                                padding: [dp(16), 0]
                                spacing: dp(10)
                                Label:
                                    text: 'Location'
                                    font_size: sp(16)
                                    bold: True
                                    color: 0.13, 0.13, 0.13, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size
                                Widget:
                                Label:
                                    id: map_limited_badge
                                    text: 'Limited'
                                    size_hint_x: None
                                    width: dp(70)
                                    font_size: sp(12)
                                    bold: True
                                    color: 0.35, 0.25, 0, 1
                                    opacity: 0
                                    halign: 'center'
                                    valign: 'middle'
                                    text_size: self.size
                                    canvas.before:
                                        Color:
                                            rgba: 1, 0.92, 0.45, 1
                                        RoundedRectangle:
                                            pos: self.pos
                                            size: self.size
                                            radius: [dp(12),]

                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                padding: [dp(16), dp(12)]
                                spacing: dp(10)

                                FloatLayout:
                                    size_hint_y: None
                                    height: dp(220)
                                    canvas.before:
                                        Color:
                                            rgba: 0.91, 0.91, 0.91, 1
                                        RoundedRectangle:
                                            pos: self.pos
                                            size: self.size
                                            radius: [dp(10),]
                                    AsyncImage:
                                        id: map_image
                                        source: ''
                                        allow_stretch: True
                                        keep_ratio: False
                                        size_hint: 1, 1
                                    Label:
                                        id: map_placeholder
                                        text: ''
                                        font_size: sp(13)
                                        color: 0.45, 0.45, 0.45, 1
                                        halign: 'center'
                                        valign: 'middle'
                                        text_size: self.size

                                Label:
                                    id: map_info
                                    text: ''
                                    size_hint_y: None
                                    height: self.texture_size[1] + dp(8)
                                    font_size: sp(13)
                                    color: 0.45, 0.45, 0.45, 1
                                    halign: 'left'
                                    valign: 'top'
                                    text_size: self.width, None

                                Button:
                                    text: 'Open in Google Maps'
                                    size_hint_y: None
                                    height: dp(34)
                                    background_normal: ''
                                    background_color: 0, 0, 0, 0
                                    color: 0.05, 0.43, 0.99, 1
                                    bold: True
                                    halign: 'left'
                                    on_release: root.open_maps()
                        # Reviews section
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            padding: [dp(16), dp(14)]
                            spacing: dp(10)
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(56)
                        spacing: dp(10)
                        BoxLayout:
                            orientation: 'vertical'
                            spacing: dp(2)
                            Label:
                                text: 'Reviews'
                                size_hint_y: None
                                height: dp(22)
                                font_size: sp(16)
                                bold: True
                                color: 0.13, 0.13, 0.13, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                            Label:
                                text: 'What students say about this place'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(12)
                                color: 0.45, 0.45, 0.45, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                        Widget:
                        BoxLayout:
                            id: rating_summary
                            orientation: 'horizontal'
                            size_hint_x: None
                            width: dp(180)
                            spacing: dp(10)
                            opacity: 0
                            Label:
                                id: reviews_avg_score
                                text: ''
                                size_hint_x: None
                                width: dp(56)
                                font_size: sp(36)
                                bold: True
                                color: 0.13, 0.13, 0.13, 1
                                halign: 'right'
                                valign: 'middle'
                                text_size: self.size
                            BoxLayout:
                                orientation: 'vertical'
                                spacing: dp(2)
                                BoxLayout:
                                    id: reviews_star_row
                                    orientation: 'horizontal'
                                    spacing: dp(2)
                                    size_hint_y: None
                                    height: dp(18)
                                Label:
                                    id: reviews_count
                                    text: ''
                                    font_size: sp(12)
                                    color: 0.45, 0.45, 0.45, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size
                            BoxLayout:
                                id: reviews_container
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: dp(8)

                            Button:
                                id: reviews_toggle
                                text: 'Show more'
                                size_hint_y: None
                                height: dp(34)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                color: 0.05, 0.43, 0.99, 1
                                bold: True
                                opacity: 0
                                disabled: True
                                halign: 'left'
                                on_release: root.toggle_reviews()

                            # Review form / login hint
                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: dp(10)
                                canvas.before:
                                    Color:
                                        rgba: 0, 0, 0, 0

                                Label:
                                    id: review_form_title
                                    text: ''
                                    size_hint_y: None
                                    height: dp(18)
                                    font_size: sp(13)
                                    bold: True
                                    color: 0.2, 0.2, 0.2, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size

                                BoxLayout:
                                    id: review_form
                                    orientation: 'vertical'
                                    size_hint_y: None
                                    height: self.minimum_height
                                    spacing: dp(10)

                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(28)
                                spacing: dp(6)
                                Label:
                                    text: 'Rating'
                                    size_hint_x: None
                                    width: dp(60)
                                    font_size: sp(13)
                                    bold: True
                                    color: 0.2, 0.2, 0.2, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size
                                BoxLayout:
                                    orientation: 'horizontal'
                                    spacing: dp(2)
                                    Button:
                                        id: star_1
                                        text: '‚òÜ'
                                        background_normal: ''
                                        background_color: 0, 0, 0, 0
                                        color: 0.96, 0.75, 0.04, 1
                                        font_size: sp(22)
                                        on_release: root.set_review_rating(1)
                                    Button:
                                        id: star_2
                                        text: '‚òÜ'
                                        background_normal: ''
                                        background_color: 0, 0, 0, 0
                                        color: 0.96, 0.75, 0.04, 1
                                        font_size: sp(22)
                                        on_release: root.set_review_rating(2)
                                    Button:
                                        id: star_3
                                        text: '‚òÜ'
                                        background_normal: ''
                                        background_color: 0, 0, 0, 0
                                        color: 0.96, 0.75, 0.04, 1
                                        font_size: sp(22)
                                        on_release: root.set_review_rating(3)
                                    Button:
                                        id: star_4
                                        text: '‚òÜ'
                                        background_normal: ''
                                        background_color: 0, 0, 0, 0
                                        color: 0.96, 0.75, 0.04, 1
                                        font_size: sp(22)
                                        on_release: root.set_review_rating(4)
                                    Button:
                                        id: star_5
                                        text: '‚òÜ'
                                        background_normal: ''
                                        background_color: 0, 0, 0, 0
                                        color: 0.96, 0.75, 0.04, 1
                                        font_size: sp(22)
                                        on_release: root.set_review_rating(5)
                                Label:
                                    id: review_rating_hint
                                    text: 'Tap a star'
                                    font_size: sp(12)
                                    color: 0.45, 0.45, 0.45, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size

                            TextInput:
                                id: review_comment
                                hint_text: 'Your review'
                                multiline: True
                                size_hint_y: None
                                height: dp(96)

                            Button:
                                id: review_submit
                                text: 'Submit'
                                size_hint_y: None
                                height: dp(42)
                                background_normal: ''
                                background_color: 0.05, 0.43, 0.99, 1
                                color: 1, 1, 1, 1
                                bold: True
                                on_release: root.submit_review()

                            Label:
                                id: review_status
                                text: ''
                                size_hint_y: None
                                height: self.texture_size[1] + dp(6)
                                font_size: sp(12)
                                color: 0.45, 0.45, 0.45, 1
                                halign: 'left'
                                valign: 'top'
                                text_size: self.width, None

                    # Right column (web: location + desktop contact button)
                    BoxLayout:
                        id: detail_right
                        orientation: 'vertical'
                        size_hint_y: None
                        height: (self.minimum_height if root.width >= dp(900) else 0)
                        spacing: dp(12)
                        padding: [0, 0]
                        size_hint_x: (0.38 if root.width >= dp(900) else 1)
                        opacity: 1 if root.width >= dp(900) else 0
                        disabled: False if root.width >= dp(900) else True

                        # Location card (desktop)
                        BoxLayout:
                            id: location_card_desktop
                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            canvas.before:
                                Color:
                                    rgba: 1, 1, 1, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12),]
                                Color:
                                    rgba: 0, 0, 0, 0.08
                                Line:
                                    width: 1
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))

                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: dp(44)
                                padding: [dp(16), 0]
                                spacing: dp(10)
                                Label:
                                    text: 'Location'
                                    font_size: sp(16)
                                    bold: True
                                    color: 0.13, 0.13, 0.13, 1
                                    halign: 'left'
                                    valign: 'middle'
                                    text_size: self.size
                                Widget:
                                Label:
                                    id: map_limited_badge_desktop
                                    text: 'Limited'
                                    size_hint_x: None
                                    width: dp(70)
                                    font_size: sp(12)
                                    bold: True
                                    color: 0.35, 0.25, 0, 1
                                    opacity: 0
                                    halign: 'center'
                                    valign: 'middle'
                                    text_size: self.size
                                    canvas.before:
                                        Color:
                                            rgba: 1, 0.92, 0.45, 1
                                        RoundedRectangle:
                                            pos: self.pos
                                            size: self.size
                                            radius: [dp(12),]

                            BoxLayout:
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                                padding: [dp(16), dp(12)]
                                spacing: dp(10)

                                FloatLayout:
                                    size_hint_y: None
                                    height: dp(220)
                                    canvas.before:
                                        Color:
                                            rgba: 0.91, 0.91, 0.91, 1
                                        RoundedRectangle:
                                            pos: self.pos
                                            size: self.size
                                            radius: [dp(10),]
                                    AsyncImage:
                                        id: map_image_desktop
                                        source: ''
                                        allow_stretch: True
                                        keep_ratio: False
                                        size_hint: 1, 1
                                    Label:
                                        id: map_placeholder_desktop
                                        text: ''
                                        font_size: sp(13)
                                        color: 0.45, 0.45, 0.45, 1
                                        halign: 'center'
                                        valign: 'middle'
                                        text_size: self.size

                                Label:
                                    id: map_info_desktop
                                    text: ''
                                    size_hint_y: None
                                    height: self.texture_size[1] + dp(8)
                                    font_size: sp(13)
                                    color: 0.45, 0.45, 0.45, 1
                                    halign: 'left'
                                    valign: 'top'
                                    text_size: self.width, None

                        Button:
                            text: 'Contact landlord'
                            size_hint_y: None
                            height: dp(44)
                            background_normal: ''
                            background_color: 0.05, 0.43, 0.99, 1
                            color: 1, 1, 1, 1
                            font_size: sp(14)
                            bold: True
                            on_release: root.contact_landlord()

        # Fixed bottom contact bar (web: fixed only on mobile)
        BoxLayout:
            size_hint_y: None
            height: (dp(70) if root.width < dp(900) else 0)
            opacity: 1 if root.width < dp(900) else 0
            disabled: False if root.width < dp(900) else True
            padding: [dp(16), dp(10)]
            spacing: dp(10)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0, 0, 0, 0.12
                Rectangle:
                    pos: self.x, self.top - dp(1)
                    size: self.width, dp(1)
            Widget:
            Button:
                text: 'Contact landlord'
                size_hint_x: None
                width: min(root.width - dp(32), dp(320))
                size_hint_y: None
                height: dp(50)
                background_normal: ''
                background_color: 0.05, 0.43, 0.99, 1
                color: 1, 1, 1, 1
                font_size: sp(15)
                bold: True
                on_release: root.contact_landlord()

<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 0.973, 0.976, 0.980, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Top navbar (web base.html)
        BoxLayout:
            size_hint_y: None
            height: dp(62)
            padding: [dp(16), 0]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 1, 0.84, 0, 0.25
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(2)
            Label:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                font_size: sp(26)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
            Widget:
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                on_release: app.go_notifications()
            Button:
                text: 'Profile'
                size_hint_x: None
                width: dp(84)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                on_release: app.go_profile()

            # Options (navbar toggler)
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_name: app.icon_font if app.icon_font else self.font_name
                font_size: sp(20)
                color: 0, 0, 0, 1
                on_release: app.show_options_menu()

        ScrollView:
            do_scroll_x: False
            bar_width: dp(6)
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [dp(16), dp(24)]
                spacing: dp(16)

                Widget:
                    size_hint_y: None
                    height: dp(12)

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: None
                    width: min(root.width - dp(32), dp(460))
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: self.minimum_height
                    padding: 0
                    spacing: 0
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(10),]
                        Color:
                            rgba: 0, 0, 0, 0.10
                        Line:
                            width: 1.1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, dp(10))

                    # Form body
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        padding: [dp(16), dp(16)]
                        spacing: dp(12)

                        Label:
                            text: '[b]Sign in[/b]'
                            markup: True
                            font_size: sp(20)
                            color: 0.15, 0.15, 0.15, 1
                            size_hint_y: None
                            height: dp(28)
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        Label:
                            text: 'Use your email and password.'
                            font_size: sp(13)
                            color: 0.45, 0.45, 0.45, 1
                            size_hint_y: None
                            height: dp(18)
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        # Email
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Email'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: email_input
                                hint_text: 'Enter your email'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        # Password
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Password'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: password_input
                                hint_text: 'Enter your password'
                                password: True
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        Label:
                            id: login_status
                            text: ''
                            size_hint_y: None
                            height: dp(22)
                            color: 0.75, 0.2, 0.2, 1
                            font_size: sp(13)

                        Button:
                            text: 'Login'
                            size_hint_y: None
                            height: dp(46)
                            background_normal: ''
                            background_color: 1, 0.84, 0, 1
                            color: 0, 0, 0, 1
                            font_size: sp(15)
                            bold: True
                            on_release: root.do_login()

                        BoxLayout:
                            size_hint_y: None
                            height: dp(34)
                            spacing: dp(8)
                            Label:
                                text: "No account?"
                                font_size: sp(13)
                                color: 0.35, 0.35, 0.35, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                            Button:
                                text: 'Create one'
                                size_hint_x: None
                                width: dp(110)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                color: 0.25, 0.45, 0.60, 1
                                font_size: sp(13)
                                on_release: app.root.current = 'register'

                        Button:
                            text: 'Back to Home'
                            size_hint_y: None
                            height: dp(40)
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                            color: 0.35, 0.35, 0.35, 1
                            font_size: sp(13)
                            on_release: app.root.current = 'home'

<RegisterScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 0.973, 0.976, 0.980, 1
            Rectangle:
                pos: self.pos
                size: self.size

        # Top navbar
        BoxLayout:
            size_hint_y: None
            height: dp(62)
            padding: [dp(16), 0]
            spacing: dp(8)
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 1, 0.84, 0, 0.25
                Rectangle:
                    pos: self.x, self.y
                    size: self.width, dp(2)
            Label:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                font_size: sp(26)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
            Widget:
            Button:
                text: 'üîî'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(20)
                on_release: app.go_notifications()
            Button:
                text: 'Profile'
                size_hint_x: None
                width: dp(84)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(14)
                color: 0, 0, 0, 1
                on_release: app.go_profile()

            # Options (navbar toggler)
            Button:
                text: '‚ò∞'
                size_hint_x: None
                width: dp(45)
                background_normal: ''
                background_color: 0, 0, 0, 0
                font_size: sp(20)
                color: 0, 0, 0, 1
                on_release: app.show_options_menu()

        ScrollView:
            do_scroll_x: False
            bar_width: dp(6)
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: [dp(16), dp(24)]
                spacing: dp(16)

                Widget:
                    size_hint_y: None
                    height: dp(12)

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: None
                    width: min(root.width - dp(32), dp(520))
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: self.minimum_height
                    padding: 0
                    spacing: 0
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(10),]
                        Color:
                            rgba: 0, 0, 0, 0.10
                        Line:
                            width: 1.1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, dp(10))

                    # Form body
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        padding: [dp(16), dp(16)]
                        spacing: dp(12)

                        Label:
                            text: '[b]Create account[/b]'
                            markup: True
                            font_size: sp(20)
                            color: 0.15, 0.15, 0.15, 1
                            size_hint_y: None
                            height: dp(28)
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        Label:
                            text: 'Fill in your details to get started.'
                            font_size: sp(13)
                            color: 0.45, 0.45, 0.45, 1
                            size_hint_y: None
                            height: dp(18)
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.size

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Profile Name'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: username_input
                                hint_text: 'Choose a profile name'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Full Name'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: full_name_input
                                hint_text: 'Enter your full name'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Email'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: email_input
                                hint_text: 'Enter your email'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Phone'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: phone_input
                                hint_text: 'Enter your phone number'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Address'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: address_input
                                hint_text: 'Enter your address'
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Account Type'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            Spinner:
                                id: role_input
                                text: 'general'
                                values: ['general', 'landlord']
                                size_hint_y: None
                                height: dp(46)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                color: 0, 0, 0, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Password'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: password_input
                                hint_text: 'Enter your password'
                                password: True
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(74)
                            spacing: dp(6)
                            Label:
                                text: 'Confirm Password'
                                size_hint_y: None
                                height: dp(18)
                                font_size: sp(13)
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                color: 0.35, 0.35, 0.35, 1
                            FormTextInput:
                                id: confirm_password_input
                                hint_text: 'Confirm your password'
                                password: True
                                multiline: False
                                size_hint_y: None
                                height: dp(46)
                                padding: [dp(12), dp(12)]
                                font_size: sp(15)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                foreground_color: 0, 0, 0, 1
                                cursor_color: 0.25, 0.45, 0.60, 1
                                canvas.before:
                                    Color:
                                        rgba: 1, 1, 1, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(6),]
                                    Color:
                                        rgba: 0, 0, 0, 0.16
                                    Line:
                                        width: 1
                                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(6))

                        Label:
                            id: register_status
                            text: ''
                            size_hint_y: None
                            height: dp(22)
                            color: 0.75, 0.2, 0.2, 1
                            font_size: sp(13)

                        Button:
                            text: 'Create account'
                            size_hint_y: None
                            height: dp(46)
                            background_normal: ''
                            background_color: 1, 0.84, 0, 1
                            color: 0, 0, 0, 1
                            font_size: sp(15)
                            bold: True
                            on_release: root.do_register()

                        BoxLayout:
                            size_hint_y: None
                            height: dp(34)
                            spacing: dp(8)
                            Label:
                                text: 'Already have an account?'
                                font_size: sp(13)
                                color: 0.35, 0.35, 0.35, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                            Button:
                                text: 'Log in'
                                size_hint_x: None
                                width: dp(90)
                                background_normal: ''
                                background_color: 0, 0, 0, 0
                                color: 0.25, 0.45, 0.60, 1
                                font_size: sp(13)
                                on_release: app.root.current = 'login'

                        Button:
                            text: 'Back to Home'
                            size_hint_y: None
                            height: dp(40)
                            background_normal: ''
                            background_color: 0, 0, 0, 0
                            color: 0.35, 0.35, 0.35, 1
                            font_size: sp(13)
                            on_release: app.root.current = 'home'
