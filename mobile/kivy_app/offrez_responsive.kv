#:import dp kivy.metrics.dp

# Responsive Home Screen with dynamic services
<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(12)
        spacing: dp(12)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        # Header with logo and auth buttons
        BoxLayout:
            size_hint_y: None
            height: dp(56)
            padding: [dp(8), dp(6)]
            spacing: dp(10)
            Label:
                id: brand_logo
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                size_hint_x: None
                width: dp(120)
                font_size: dp(28)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
            Widget:
            Button:
                text: 'Login'
                size_hint_x: None
                width: dp(70)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0, 0.4, 0.8, 1
                font_size: dp(14)
                on_release: app.root.current = 'login'
            Button:
                text: 'Register'
                size_hint_x: None
                width: dp(80)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 1, 1, 1, 1
                font_size: dp(14)
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]
                on_release: app.root.current = 'register'
        # Services grid - responsive columns
        ScrollView:
            GridLayout:
                id: services_grid
                cols: 2 if root.width < dp(600) else (3 if root.width < dp(900) else 4)
                spacing: dp(10)
                padding: [dp(4), 0]
                size_hint_y: None
                height: self.minimum_height

# Responsive Universities Screen
<UniversitiesScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(12)
        spacing: dp(12)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        # Header with back button
        BoxLayout:
            size_hint_y: None
            height: dp(56)
            padding: [dp(4), dp(6)]
            spacing: dp(10)
            Button:
                text: '← Back'
                size_hint_x: None
                width: dp(80)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
                canvas.before:
                    Color:
                        rgba: 0.93, 0.93, 0.93, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]
                on_release: app.root.current = 'home'
            Label:
                text: '[b]Students Accommodation[/b]'
                markup: True
                font_size: dp(18)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
            Label:
                id: loading_label
                text: ''
                size_hint_x: None
                width: dp(100)
                halign: 'right'
                valign: 'middle'
                color: 0.5, 0.5, 0.5, 1
                font_size: dp(12)
        # Universities list - responsive grid
        ScrollView:
            GridLayout:
                id: unis_container
                cols: 1 if root.width < dp(600) else 2
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(12)
                padding: [dp(4), dp(4)]

# Responsive Properties List Screen
<PropertyListScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(12)
        spacing: dp(12)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        # Header with back button
        BoxLayout:
            size_hint_y: None
            height: dp(56)
            padding: [dp(4), dp(6)]
            spacing: dp(10)
            Button:
                text: '← Back'
                size_hint_x: None
                width: dp(80)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
                canvas.before:
                    Color:
                        rgba: 0.93, 0.93, 0.93, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]
                on_release: app.root.current = 'universities'
            Label:
                id: title_label
                text: '[b]Properties[/b]'
                markup: True
                font_size: dp(18)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
            Label:
                id: loading_label
                text: ''
                size_hint_x: None
                width: dp(100)
                halign: 'right'
                valign: 'middle'
                color: 0.5, 0.5, 0.5, 1
                font_size: dp(12)
        # Filters - responsive layout
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            padding: [dp(4), 0]
            Label:
                text: 'Gender:'
                size_hint_x: None
                width: dp(60)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
            Spinner:
                id: gender_filter
                text: 'All'
                values: ['All', 'Boys only', 'Girls only', 'Mixed']
                size_hint_x: 0.4
                background_normal: ''
                background_color: 0.95, 0.95, 0.95, 1
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
            Label:
                text: 'Sharing:'
                size_hint_x: None
                width: dp(70)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
            Spinner:
                id: sharing_filter
                text: 'All'
                values: ['All', 'Single room', '2 Sharing', 'Other']
                size_hint_x: 0.4
                background_normal: ''
                background_color: 0.95, 0.95, 0.95, 1
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
        # Properties grid - responsive columns
        ScrollView:
            GridLayout:
                id: props_container
                cols: 1 if root.width < dp(600) else 2
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(12)
                padding: [dp(4), dp(4)]

# Responsive Property Detail Screen
<PropertyDetailScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        # Header
        BoxLayout:
            size_hint_y: None
            height: dp(56)
            padding: [dp(12), dp(6)]
            spacing: dp(10)
            Button:
                text: '← Back'
                size_hint_x: None
                width: dp(80)
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: 0.2, 0.2, 0.2, 1
                font_size: dp(14)
                canvas.before:
                    Color:
                        rgba: 0.93, 0.93, 0.93, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]
                on_release: app.root.current = 'properties'
            Label:
                text: '[b]Property Details[/b]'
                markup: True
                font_size: dp(18)
                halign: 'left'
                valign: 'middle'
                text_size: self.size
                color: 0, 0, 0, 1
        # Content - responsive layout
        ScrollView:
            BoxLayout:
                orientation: 'vertical' if root.width < dp(800) else 'horizontal'
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(12)
                padding: dp(12)
                # Main content
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1 if root.width < dp(800) else 0.65
                    spacing: dp(12)
                    # Large property image
                    AsyncImage:
                        id: prop_image
                        size_hint_y: None
                        height: dp(250) if root.width < dp(600) else dp(350)
                        canvas.before:
                            Color:
                                rgba: 0.9, 0.9, 0.9, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10),]
                    Label:
                        id: prop_title
                        text: 'Property Title'
                        markup: True
                        font_size: dp(20)
                        halign: 'left'
                        valign: 'top'
                        text_size: self.size
                        size_hint_y: None
                        height: self.texture_size[1]
                        color: 0, 0, 0, 1
                    Label:
                        id: prop_description
                        text: 'Description'
                        halign: 'left'
                        valign: 'top'
                        text_size: self.size
                        size_hint_y: None
                        height: self.texture_size[1]
                        color: 0.2, 0.2, 0.2, 1
                        font_size: dp(14)
                    Label:
                        id: prop_details
                        text: 'Details'
                        markup: True
                        halign: 'left'
                        valign: 'top'
                        text_size: self.size
                        size_hint_y: None
                        height: self.texture_size[1]
                        color: 0.2, 0.2, 0.2, 1
                        font_size: dp(14)
                # Sidebar
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    size_hint_x: 1 if root.width < dp(800) else 0.35
                    spacing: dp(12)
                    # Contact card
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        padding: dp(16)
                        spacing: dp(12)
                        canvas.before:
                            Color:
                                rgba: 0.95, 0.95, 0.95, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10),]
                        Label:
                            text: '[b]Contact Landlord[/b]'
                            markup: True
                            font_size: dp(16)
                            halign: 'left'
                            valign: 'top'
                            text_size: self.size
                            size_hint_y: None
                            height: self.texture_size[1]
                            color: 0, 0, 0, 1
                        Label:
                            id: price_label
                            text: 'Price: $0'
                            markup: True
                            font_size: dp(18)
                            halign: 'left'
                            valign: 'top'
                            text_size: self.size
                            size_hint_y: None
                            height: self.texture_size[1]
                            color: 0, 0.5, 0, 1
                        Button:
                            id: contact_btn
                            text: 'Contact'
                            size_hint_y: None
                            height: dp(44)
                            background_normal: ''
                            background_color: 0, 0.47, 0.84, 1
                            color: 1, 1, 1, 1
                            font_size: dp(16)
                            canvas.before:
                                Color:
                                    rgba: self.background_color
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(8),]

# Responsive Login Screen
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20) if root.width < dp(600) else dp(40)
        spacing: dp(16)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Widget:
            size_hint_y: 0.1
        # Centered login card
        BoxLayout:
            orientation: 'vertical'
            size_hint: (1, None) if root.width < dp(600) else (None, None)
            width: dp(400) if root.width >= dp(600) else root.width
            height: self.minimum_height
            pos_hint: {'center_x': 0.5}
            spacing: dp(16)
            padding: dp(24)
            canvas.before:
                Color:
                    rgba: 0.98, 0.98, 0.98, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [dp(12),]
            Label:
                text: '[b]off[/b][color=#ffd700]Rez[/color]'
                markup: True
                font_size: dp(36)
                size_hint_y: None
                height: dp(50)
                color: 0, 0, 0, 1
            Label:
                text: '[b]Login[/b]'
                markup: True
                font_size: dp(24)
                size_hint_y: None
                height: dp(40)
                color: 0, 0, 0, 1
            TextInput:
                id: email_input
                hint_text: 'Email'
                multiline: False
                size_hint_y: None
                height: dp(48)
                padding: [dp(12), dp(12)]
                background_normal: ''
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
                font_size: dp(16)
                canvas.before:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        rounded_rectangle: self.x, self.y, self.width, self.height, dp(8)
                        width: 1
            TextInput:
                id: password_input
                hint_text: 'Password'
                password: True
                multiline: False
                size_hint_y: None
                height: dp(48)
                padding: [dp(12), dp(12)]
                background_normal: ''
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
                font_size: dp(16)
                canvas.before:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        rounded_rectangle: self.x, self.y, self.width, self.height, dp(8)
                        width: 1
            Label:
                id: error_label
                text: ''
                color: 1, 0, 0, 1
                size_hint_y: None
                height: dp(20)
                font_size: dp(14)
            Button:
                text: 'Login'
                size_hint_y: None
                height: dp(48)
                background_normal: ''
                background_color: 0, 0, 0, 1
                color: 1, 1, 1, 1
                font_size: dp(16)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8),]
                on_release: root.do_login()
            BoxLayout:
                size_hint_y: None
                height: dp(30)
                Label:
                    text: "Don't have an account?"
                    color: 0.5, 0.5, 0.5, 1
                    font_size: dp(14)
                Button:
                    text: 'Register'
                    size_hint_x: None
                    width: dp(80)
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: 0, 0.47, 0.84, 1
                    font_size: dp(14)
                    on_release: app.root.current = 'register'
        Widget:
            size_hint_y: 0.2

# Responsive Register Screen
<RegisterScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20) if root.width < dp(600) else dp(40)
        spacing: dp(16)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Widget:
            size_hint_y: 0.05
        ScrollView:
            # Centered register card
            BoxLayout:
                orientation: 'vertical'
                size_hint: (1, None) if root.width < dp(600) else (None, None)
                width: dp(400) if root.width >= dp(600) else root.width
                height: self.minimum_height
                pos_hint: {'center_x': 0.5}
                spacing: dp(16)
                padding: dp(24)
                canvas.before:
                    Color:
                        rgba: 0.98, 0.98, 0.98, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(12),]
                Label:
                    text: '[b]off[/b][color=#ffd700]Rez[/color]'
                    markup: True
                    font_size: dp(36)
                    size_hint_y: None
                    height: dp(50)
                    color: 0, 0, 0, 1
                Label:
                    text: '[b]Create Account[/b]'
                    markup: True
                    font_size: dp(24)
                    size_hint_y: None
                    height: dp(40)
                    color: 0, 0, 0, 1
                TextInput:
                    id: email_input
                    hint_text: 'Email'
                    multiline: False
                    size_hint_y: None
                    height: dp(48)
                    padding: [dp(12), dp(12)]
                    background_normal: ''
                    background_color: 1, 1, 1, 1
                    foreground_color: 0, 0, 0, 1
                    font_size: dp(16)
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Line:
                            rounded_rectangle: self.x, self.y, self.width, self.height, dp(8)
                            width: 1
                TextInput:
                    id: password_input
                    hint_text: 'Password'
                    password: True
                    multiline: False
                    size_hint_y: None
                    height: dp(48)
                    padding: [dp(12), dp(12)]
                    background_normal: ''
                    background_color: 1, 1, 1, 1
                    foreground_color: 0, 0, 0, 1
                    font_size: dp(16)
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Line:
                            rounded_rectangle: self.x, self.y, self.width, self.height, dp(8)
                            width: 1
                TextInput:
                    id: password2_input
                    hint_text: 'Confirm Password'
                    password: True
                    multiline: False
                    size_hint_y: None
                    height: dp(48)
                    padding: [dp(12), dp(12)]
                    background_normal: ''
                    background_color: 1, 1, 1, 1
                    foreground_color: 0, 0, 0, 1
                    font_size: dp(16)
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Line:
                            rounded_rectangle: self.x, self.y, self.width, self.height, dp(8)
                            width: 1
                Label:
                    id: error_label
                    text: ''
                    color: 1, 0, 0, 1
                    size_hint_y: None
                    height: dp(20)
                    font_size: dp(14)
                Button:
                    text: 'Register'
                    size_hint_y: None
                    height: dp(48)
                    background_normal: ''
                    background_color: 0, 0, 0, 1
                    color: 1, 1, 1, 1
                    font_size: dp(16)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8),]
                    on_release: root.do_register()
                BoxLayout:
                    size_hint_y: None
                    height: dp(30)
                    Label:
                        text: "Already have an account?"
                        color: 0.5, 0.5, 0.5, 1
                        font_size: dp(14)
                    Button:
                        text: 'Login'
                        size_hint_x: None
                        width: dp(70)
                        background_normal: ''
                        background_color: 0, 0, 0, 0
                        color: 0, 0.47, 0.84, 1
                        font_size: dp(14)
                        on_release: app.root.current = 'login'
        Widget:
            size_hint_y: 0.05

# Profile Screen placeholder
<ProfileScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(12)
        Label:
            text: 'Profile Screen'
            color: 0, 0, 0, 1
